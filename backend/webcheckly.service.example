[Unit]
Description=WebCheckly Backend Service
After=network.target postgresql.service

[Service]
Type=simple
User=webcheckly
WorkingDirectory=/www/wwwroot/webcheckly
ExecStart=/www/wwwroot/webcheckly/webcheckly-linux-amd64
Restart=always
RestartSec=5

# 环境变量配置
Environment="DATABASE_URL=postgres://user:password@localhost:5432/webcheckly?sslmode=disable"
Environment="JWT_SECRET=your-secret-key-here"
Environment="PORT=8080"

# 重要：设置 PATH 环境变量，包含工具路径
# 根据实际安装位置调整以下路径
Environment="PATH=/usr/local/bin:/usr/bin:/bin:/home/webcheckly/go/bin:/home/webcheckly/.npm-global/bin"

# 重要：设置 HOME 环境变量（Katana 等工具需要）
# 根据实际运行用户调整
Environment="HOME=/home/webcheckly"

# 可选：如果 Chrome/Chromium 不在标准路径，设置 CHROME_PATH
# Environment="CHROME_PATH=/usr/bin/chromium-browser"

# 或者使用 EnvironmentFile 从文件加载
# EnvironmentFile=/www/wwwroot/webcheckly/.env

# 日志配置
StandardOutput=journal
StandardError=journal
SyslogIdentifier=webcheckly

[Install]
WantedBy=multi-user.target
