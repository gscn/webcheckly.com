# 故障排除指南

## 常见问题

### 1. URL验证失败

**问题**：输入URL后提示"Invalid URL format"或"URL格式无效"

**解决方案**：
- 确保URL包含协议（http://或https://）
- 检查URL长度是否超过2000字符
- 确保URL不包含控制字符
- 检查主机名格式是否正确

**示例**：
- ✅ 正确：`https://example.com`
- ✅ 正确：`http://www.example.com/path`
- ❌ 错误：`example.com`（缺少协议）
- ❌ 错误：`javascript:alert(1)`（禁止的协议）

### 2. SSRF防护阻止

**问题**：提示"Private IP not allowed"或"私有IP不允许"

**解决方案**：
- 这是安全防护机制，不允许扫描内网地址
- 只能扫描公网可访问的URL
- 如果确实需要扫描内网地址，需要修改服务器配置（不推荐）

**被阻止的地址类型**：
- localhost、127.0.0.1
- 私有IP段（10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16）
- 云元数据服务地址（169.254.169.254）

### 3. 扫描超时

**问题**：扫描任务长时间无响应或超时

**解决方案**：
- 检查目标网站是否可访问
- 尝试减少扫描选项（如关闭链接健康检查）
- 检查网络连接
- 如果目标网站响应慢，可能需要增加超时时间

### 4. 任务状态查询失败

**问题**：无法获取任务状态或结果

**解决方案**：
- 检查任务ID是否正确
- 任务可能已过期（24小时后自动清理）
- 检查API连接是否正常
- 查看浏览器控制台是否有错误信息

### 5. 导出功能失败

**问题**：导出报告时出错

**解决方案**：
- 检查浏览器是否支持文件下载
- 确保有足够的磁盘空间
- 对于大型报告，可能需要较长时间
- 尝试使用不同的导出格式

### 6. 性能问题

**问题**：页面加载慢或卡顿

**解决方案**：
- 检查浏览器版本（建议使用Chrome、Firefox、Edge最新版）
- 清除浏览器缓存
- 关闭不必要的浏览器标签页
- 对于大量结果，使用筛选功能减少显示数量

### 7. AI分析失败

**问题**：AI分析报告未生成

**解决方案**：
- 检查是否配置了DEEPSEEK_API_KEY环境变量
- 检查API密钥是否有效
- 检查网络连接是否正常
- 查看后端日志了解详细错误信息

### 8. 深度检查工具未找到

**问题**：深度检查功能提示工具未安装

**解决方案**：
- 确保已安装Katana工具
- 检查工具是否在系统PATH中
- 在Windows上，确保工具可执行文件路径正确
- 查看后端日志了解工具执行情况

## 错误代码说明

### HTTP状态码

- **400 Bad Request**：请求参数错误（URL格式错误、缺少必需参数等）
- **429 Too Many Requests**：请求过于频繁，触发限流保护
- **500 Internal Server Error**：服务器内部错误
- **503 Service Unavailable**：服务繁忙，请稍后重试

### 任务状态

- **pending**：任务已创建，等待执行
- **running**：任务正在执行中
- **completed**：任务执行成功
- **failed**：任务执行失败

## 联系支持

如果以上解决方案无法解决您的问题，请：

1. 查看浏览器控制台的错误信息
2. 查看后端日志文件
3. 通过技术支持页面联系我们
4. 提供详细的错误信息和复现步骤

